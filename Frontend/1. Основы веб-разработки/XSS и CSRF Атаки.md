### **XSS (Cross-Site Scripting) — межсайтовый скриптинг**

**XSS** — это уязвимость, которая позволяет злоумышленнику внедрять и выполнять вредоносные скрипты на веб-сайтах, используемых пользователями. Эти скрипты выполняются в браузере жертвы, что позволяет атакующему красть данные, подделывать запросы, перенаправлять пользователя и многое другое.
#### **Типы XSS:**
1. **Stored XSS (Сохранённый):**
    - Вредоносный код сохраняется на сервере (например, в базе данных).
    - Пример: Пользователь вводит вредоносный JavaScript в комментарий на сайте. При загрузке страницы этот код выполняется у всех пользователей, которые просматривают комментарии.
2. **Reflected XSS (Отражённый):**
    - Вредоносный код передаётся через параметры запроса и немедленно отражается в ответе сервера.
    - Пример: Ссылка с вредоносным кодом отправляется жертве. При переходе по ссылке код выполняется в браузере.
3. **DOM-based XSS:**
    - Вредоносный код выполняется непосредственно в браузере, не проходя через сервер.
    - Пример: Скрипт изменяет DOM-дерево, основываясь на данных из URL, локального хранилища или других источников.


#### **Последствия:**
- Кража cookies, токенов и другой чувствительной информации.
- Выполнение вредоносных действий от имени пользователя.
- Перенаправление пользователя на фишинговые сайты.

#### **Защита от XSS:**
- Использование методов экранирования данных (например, `innerText` вместо `innerHTML`).
- Валидация и очистка пользовательского ввода.
- Использование Content Security Policy (CSP) для ограничения выполнения небезопасных скриптов.

---

### **CSRF (Cross-Site Request Forgery) — межсайтовая подделка запроса**

**CSRF** — это атака, которая заставляет пользователя выполнять нежелательные действия на сайте, где он аутентифицирован, без его ведома.

#### **Как работает CSRF:**
1. Пользователь авторизован на сайте (например, в интернет-банке).
2. Злоумышленник отправляет жертве вредоносную ссылку или встраивает скрытую форму на свою страницу.
3. При переходе по ссылке или загрузке страницы браузер жертвы автоматически отправляет cookies или другие данные сессии на целевой сайт.
4. Сервер принимает запрос, так как он исходит от аутентифицированного пользователя.

#### **Последствия:**

- Незаметное выполнение действий от имени пользователя (например, перевод денег, изменение данных).
- Возможность атаковать административные функции сайта.

#### **Защита от CSRF:**

- Использование CSRF-токенов:
    - Токен генерируется сервером и проверяется на каждой форме или запросе.
- Установка флага `SameSite` для cookies:
    - Ограничивает отправку cookies только с запросами с того же домена.
- Использование методов аутентификации, которые не полагаются на cookies (например, JWT в заголовках).

---

### Сравнение XSS и CSRF:

|Характеристика|XSS|CSRF|
|---|---|---|
|**Механизм атаки**|Внедрение и выполнение скриптов|Подделка запросов от имени пользователя|
|**Цель**|Кража данных, выполнение кода|Выполнение действий на сервере|
|**Уязвимые данные**|Cookies, токены, DOM|Cookies|
|**Защита**|Экранирование, CSP, валидация|CSRF-токены, SameSite cookies|

### Вывод:

- **XSS** направлен на выполнение вредоносного кода.
- **CSRF** — на принуждение пользователя выполнить нежелательные действия. Обе уязвимости требуют комплексной защиты для обеспечения безопасности веб-приложений.